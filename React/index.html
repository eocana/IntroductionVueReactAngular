<script src="https://unpkg.com/react@15/dist/react.js"></script>
<script src="https://unpkg.com/react-dom@15/dist/react-dom.js"></script>

<link rel="stylesheet" href="css.css">


<div id="app"></div>


<script>
function Username(props){
	return(
  	<p onClick={() => {props.nameCliclkedHandler(props.username)}}>{props.username}</p>
  );

}


class App extends React.Component {
	
  constructor(props){
      super(props);
      this.state = {
        name: props.name,
        elements:[],
        message: ''
      };
   }

    render(){
    
    	let updatePara = '';
      let nameParaClass = '';
      if (this.state.name != this.props.name){
      	updatePara = <p>Name updated</p>;
        nameParaClass = 'updated';
      }
      
      let list = this.state.elements.map(
      	(el) => {
        	const liStyle = {
      			backgroundColor: el % 2 == 0 ? 'yellow' : 'red'
      		};
        	return <li key={el} style={ liStyle  }>{el}</li>;
        }
      );
    
      return (
      <div>
        <Username username="Joker" nameCliclkedHandler={this.userWasClicked.bind(this)}/>
        <Username username="Sarbjeet" nameCliclkedHandler={this.userWasClicked.bind(this)}/>
        <p className={nameParaClass}>{this.state.name}</p>
        {updatePara}
        <button onClick={this.changeName.bind(this)}>Change Name</button>
        <button onClick={this.addElement.bind(this)}>New element</button>
        <ul>
          {list}
        </ul>
        <input 
          type="text" 
          value={this.state.message}
          onChange={this.changeMessageInput.bind(this)}></input>
          <p>{this.state.message}</p>
          
      </div>
    	);
 		}
    changeName(){
    	this.setState({
      	name: 'Aaron'
      });
    }
    
    addElement(){
    	const oldElements = this.state.elements;
    	this.setState({
      	elements: oldElements.concat(oldElements.length + 1)
      });
    }
    
    changeMessageInput(event){
    	this.setState({
      	message: event.target.value
      });
    }
    
    userWasClicked(name){
    	alert(name);
    }
    
}

ReactDOM.render(<App name="Eric"/>, 
document.querySelector("#app"));

//function App(props) {
	//return (
   // <div>
    //  <p>{props.name}</p>
    //  <button>Change Name</button>
   // </div>
//	); 
//}
//let name = 'Eric';
//ReactDOM.render(<p>Eric</p>, document.querySelector("#app"))
//const element = React.createElement('p', null, 'Eric');
//function changeName(){
	//name= 'Aaron';
  //const element = (<div>
  //<p>{name}</p>
  //<button onClick={changeName}>Change Name</button>
//</div>
//);
//ReactDOM.render(element, document.querySelector("#app"));
//}

</script>